"use strict";var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}try{Object.keys||(Object.keys=function(){var i=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=a.length;return function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on non-object");var e=[];for(var r in t)i.call(t,r)&&e.push(r);if(n)for(var o=0;o<c;o++)i.call(t,a[o])&&e.push(a[o]);return e}}()),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var r=Object(t),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var n=Object.keys(Object(i)),a=0,c=n.length;a<c;a++){var s=n[a],d=Object.getOwnPropertyDescriptor(i,s);void 0!==d&&d.enumerable&&(r[s]=i[s])}}return r}})}catch(t){var img=new Image;img.src="//ddd.1sapp.com/report?topic=log_cpc_trace&cmd=40001&type=polyfil&message=polyfil_error&isStack=true&stack="+t.stack}var getQueryString=function(t){void 0===t&&(t=window.location.href);var e={},r=[],o="",i="",n=t.substring(t.indexOf("?")+1,t.length).split("&");for(var a in n)o=(r=n[a].split("="))[0]||"",-1<(i=r[1]||"").indexOf("#")?e[o]=decodeURIComponent(i.split("#")[0]):e[o]=decodeURIComponent(i);return e},_getCpcSDKVersion=function(){var t="";if(window.cpcAndroid)try{(t=window.cpcAndroid.fetchInfo("getCpcSDKVersion"))&&"1.825-rc1"!=t&&(t=t.split("-")[0])}catch(t){}return t},getCpcSDKVersion=function(){var t="";if(window.cpcAndroid)try{t=(t=window.cpcAndroid.fetchInfo("getCpcSDKVersion"))&&t}catch(t){}return t},getClickTime=function(){var t=0;if(window.cpcAndroid)try{var e=window.cpcAndroid.fetchInfo(JSON.stringify({method:"getClickTime"}));e&&(t=e)}catch(t){}return t},setSessionStorage=function(t,e){sessionStorage.setItem(t,e)},getSessionStorage=function(t){return sessionStorage.getItem(t)},device_detect=function(t,e){void 0===t&&(t=window.navigator.userAgent),void 0===e&&(e=window.navigator.platform);var r={},o={},i=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),n=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=!!t.match(/\(Macintosh\; Intel /),c=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&t.match(/(iPhone\sOS)\s([\d_]+)/),h=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=/Win\d{2}|Windows/.test(e),p=t.match(/Windows Phone ([\d.]+)/),l=h&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),m=t.match(/Silk\/([\d._]+)/),v=t.match(/(BlackBerry).*Version\/([\d.]+)/),g=t.match(/(BB10).*Version\/([\d.]+)/),y=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),_=t.match(/PlayBook/),S=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),b=t.match(/Firefox\/([\d.]+)/),w=t.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),C=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),T=!S&&t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),k=t.match(/MicroMessenger/i),O=t.match(/UCBrowser/i),A=t.match(/QQ\//i),I=t.match(/MiuiBrowser\//i),j=t.match(/baiduboxapp\//i),q=T||t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);return(o.webkit=!!i)&&(o.version=i[1]),n&&(r.android=!0,r.version=n[2]),d&&!s&&(r.ios=r.iphone=!0,r.version=d[2].replace(/_/g,".")),c&&(r.ios=r.ipad=!0,r.version=c[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),p&&(r.wp=!0,r.version=p[1]),h&&(r.webos=!0,r.version=h[2]),l&&(r.touchpad=!0),v&&(r.blackberry=!0,r.version=v[2]),g&&(r.bb10=!0,r.version=g[2]),y&&(r.rimtabletos=!0,r.version=y[2]),_&&(o.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),m&&(o.silk=!0,o.version=m[1]),!m&&r.android&&t.match(/Kindle Fire/)&&(o.silk=!0),S&&(o.chrome=!0,o.version=S[1]),b&&(o.firefox=!0,o.version=b[1]),w&&(r.firefoxos=!0,r.version=w[1]),C&&(o.ie=!0,o.version=C[1]),q&&(a||r.ios||u)&&(o.safari=!0,r.ios||(o.version=q[1])),T&&(o.webview=!0),k&&(o.weixin=!0),A&&(o.QQ=!0),O&&(o.UC=!0),I&&(o.MI=!0),j&&(o.BaiduBox=!0),r.tablet=!!(c||_||n&&!t.match(/Mobile/)||b&&t.match(/Tablet/)||C&&!t.match(/Phone/)&&t.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(n||d||h||v||g||S&&t.match(/Android/)||S&&t.match(/CriOS\/([\d.]+)/)||b&&t.match(/Mobile/)||C&&t.match(/Touch/))),r.version=r.version||"0.0",r.PC=/win/i.test(e)||/Mac/.test(e),r.PC&&(r.MAC=/Mac/.test(e),r.WIN=/win/i.test(e)),r},Base64=function(){function t(t){void 0===t&&(t="default"),this.table="default"==t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/":"lToWfMpEHAcir_JLRdBDSkaU5hPnmOCqVZ2KXNzI4uwGx01Ys379egtQ8yF-vbj6"}return t.prototype.UTF16ToUTF8=function(t){for(var e=[],r=t.length,o=0;o<r;o++){var i=t.charCodeAt(o);if(0<i&&i<=127)e.push(t.charAt(o));else if(128<=i&&i<=2047){var n=192|i>>6&31,a=128|63&i;e.push(String.fromCharCode(n),String.fromCharCode(a))}else if(2048<=i&&i<=65535){n=224|i>>12&15,a=128|i>>6&63;var c=128|63&i;e.push(String.fromCharCode(n),String.fromCharCode(a),String.fromCharCode(c))}}return e.join("")},t.prototype.UTF8ToUTF16=function(t){var e=[],r=t.length,o=0;for(o=0;o<r;o++){var i=t.charCodeAt(o);if(0==(i>>7&255))e.push(t.charAt(o));else if(6==(i>>5&255)){var n=(31&i)<<6|63&(a=t.charCodeAt(++o));e.push(String.fromCharCode(n))}else if(14==(i>>4&255)){var a;n=(255&(i<<4|(a=t.charCodeAt(++o))>>2&15))<<8|((3&a)<<6|63&t.charCodeAt(++o));e.push(String.fromCharCode(n))}}return e.join("")},t.prototype.encode=function(t){if(!t)return"";for(var e=this.UTF16ToUTF8(t),r=0,o=e.length,i=[];r<o;){var n=255&e.charCodeAt(r++);if(i.push(this.table[n>>2]),r==o){i.push(this.table[(3&n)<<4]),i.push("==");break}var a=e.charCodeAt(r++);if(r==o){i.push(this.table[(3&n)<<4|a>>4&15]),i.push(this.table[(15&a)<<2]),i.push("=");break}var c=e.charCodeAt(r++);i.push(this.table[(3&n)<<4|a>>4&15]),i.push(this.table[(15&a)<<2|(192&c)>>6]),i.push(this.table[63&c])}return i.join("")},t.prototype.trim=function(t){return t.trim()},t.prototype.decode=function(t){if(!t)return"";for(var e=t.length,r=0,o=[];r<e;){var i=this.table.indexOf(t.charAt(r++)),n=this.table.indexOf(t.charAt(r++)),a=this.table.indexOf(t.charAt(r++)),c=this.table.indexOf(t.charAt(r++)),s=i<<2|n>>4,d=(15&n)<<4|a>>2,h=(3&a)<<6|c;o.push(String.fromCharCode(s)),64!=a&&0!=d&&o.push(String.fromCharCode(d)),64!=c&&0!=h&&o.push(String.fromCharCode(h))}return this.UTF8ToUTF16(o.join(""))},t}(),InitParams=function(){function t(t,e){this.query=t,this.init_trace_time=e}return t.prototype.setQueryInSession=function(){this.query.qtt_env&&setSessionStorage("qtt_env",this.query.qtt_env),this.query.iclicashsid&&setSessionStorage("iclicashsid",this.query.iclicashsid),this.query.icliideaid&&setSessionStorage("iclicashsid",this.query.icliideaid)},t.prototype.default_params=function(){var t=device_detect();this.setQueryInSession();var e=getClickTime();e&&this.init_trace_time;var r=new Base64("icliideaid"),o=this.query.icliideaid&&r.decode(this.query.icliideaid||getSessionStorage("icliideaid")||"")||0;return{iclicashsid:this.query.iclicashsid||getSessionStorage("iclicashsid")||"none",opt_ideaid:o,qtt_env:this.query.qtt_env||getSessionStorage("qtt_env")||"none",opt_sdk_version:getCpcSDKVersion(),os:t.MAC?"MAC":t.WIN?"WIN":t.PC?"pc":t.android?"Android":t.ios?"iOS":"other",v:t.version,ref:document.referrer}},t}(),protocol="http:";document.location.protocol&&(protocol=document.location.protocol);var base_url=protocol+"//rcv.aiclk.com/trace",ab_url=protocol+"//qa3-adv.qttcs.cn/tools/callback/conversion-code-check";ab_url=protocol+"//adv.aiclk.com/tools/callback/conversion-code-check";var LogServer=function(){function t(){}return t.prototype.send=function(t,e,r){var o="",i=!1;r&&r.stack&&(o=r.stack,i=!0);var n=new Image;n.onload=this.onload,n.onerror=this.onerror,n.src="//ddd.1sapp.com/report?topic=log_cpc_trace&cmd=40001&type="+t+"&message="+e+"&stack="+o+"&isStack="+i},t.prototype.trace_error=function(t,e){this.send("trace_error",t,e)},t.prototype.site_error=function(t,e){this.send("site_error",t,e)},t.prototype.onload=function(){},t.prototype.onerror=function(){},t}(),log=new LogServer,SendTrace=function(){function t(t,e,r){this._query=t,this._init_trace_time=e,this.default_params=r,this._sdk_version=_getCpcSDKVersion(),this.sendType=""}return t.prototype.sendTrace=function(t){void 0===t&&(t={}),this.sendType="h5";try{if(this._sdk_version&&"1.825"<=this._sdk_version)for(var e=["load"],r=0;r<e.length;r++)t.t==e[r]&&(this.sendType="sdk");var o=(new Date).getTime(),i=this.paramsToString(Object.assign(t,{timestamp:o,_t:Math.floor((o-this._init_trace_time)/1e3),qtt_env:this._query.qtt_env||"none"},this.default_params)),n=base_url+"?"+i;(this._query.qtt_env||getSessionStorage("qtt_env"))&&(n=ab_url+"?"+i),"sdk"==this.sendType?this.sendSDKTrace(n):this.sendImageTrace(n)}catch(t){log.trace_error("trace_send_trace_error",t)}},t.prototype.sendImageTrace=function(t){var e=new Image;e.onerror=this.onerror,e.src=t},t.prototype.sendSDKTrace=function(e){if(window.cpcAndroid)try{1!=window.cpcAndroid.fetchInfo(JSON.stringify({method:"excuteUrl",targetUrl:e}))&&this.sendImageTrace(e)}catch(t){this.sendImageTrace(e)}else this.sendImageTrace(e)},t.prototype.paramsToString=function(r){try{var o="";return Object.keys(r).forEach(function(t,e){o+=0==e?t+"="+encodeURIComponent(r[t]):"&"+t+"="+encodeURIComponent(r[t])}),o}catch(t){return log.trace_error("trace_params_to_string_error",t),""}},t.prototype.onerror=function(){},t}(),AddEvent=function(){function t(t){this.trace=t,this.listenerLoad()}return t.prototype.listenerClick=function(){var e=this,r=document.documentElement.clientHeight||document.body&&document.body.clientHeight;document.addEventListener("touchstart",function(t){e.sendClickMonitor(t.touches[0].pageX,t.touches[0].pageY,t.touches[0].clientX,t.touches[0].clientY,r)})},t.prototype.sendClickMonitor=function(t,e,r,o,i){this.trace.sendTrace({t:"clickMonitor",opt_first_screen:!(0<e-i),px:t,py:e,x:r,y:o})},t.prototype.listenerLoad=function(){var e=this;window.addEventListener("load",function(t){e.trace.sendTrace({t:"load"})})},t.prototype.domRead=function(){var t=this;document.addEventListener("DOMContentLoaded",function(){t.trace.sendTrace({t:"ctsite_dom_read"})},!1)},t}(),StayEvent=function(){function t(t){this.trace=t,this.stayDurationTrace()}return t.prototype.stayDurationTrace=function(){var t=this,e=[1,5,10,30,60,120],r=setInterval(function(){(new Date).getTime()-t.trace.init_trace_time>=1e3*e[0]&&(t.trace.sendTrace({t:"stay",duration:e[0],p:t.getScrollTop()}),e.shift(),e.length<1&&clearInterval(r))},1e3)},t.prototype.getScrollTop=function(){var t=0,e=0;return document.body&&(t=document.body.scrollTop),document.documentElement&&(e=document.documentElement.scrollTop),0<t-e?t:e},t}();function jumpWeChatShare(t){var e=!(!window.cpcAndroid||!window.cpcAndroid.jumpWeChatShare);return(0,window.sendTrace)({t:"whale_wechat_share",opt_bridge:e,opt_config:JSON.stringify(t)}),e&&window.cpcAndroid.jumpWeChatShare(JSON.stringify({title:t.title,desc:t.desc,url:t.url,icon:t.icon})),e}var Trace=function(i){function t(){var t=this,e=getQueryString(),r=(new Date).getTime(),o=new InitParams(e,r).default_params();return(t=i.call(this,e,r,o)||this).init_trace_time=r,t.init(),t}return __extends(t,i),t.prototype.init=function(){this.sendBeforeLoad();try{new AddEvent(this),new StayEvent(this)}catch(t){}},t.prototype.sendBeforeLoad=function(){this.sendTrace({t:"beforeload-kehu"})},t}(SendTrace);if(!window.sendTrace){var trace=new Trace;window.sendTrace=trace.sendTrace.bind(trace),window.jumpWeChatShare=jumpWeChatShare.bind(trace)}
