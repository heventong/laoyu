this.Clue=this.Clue||{},this.Clue.Loader=function(){"use strict";var e={revison:"c1ae5539",time:"2019-11-19 10:49:14",timestamp:1574131754880},n="vendor.5b9a0c.js",t="activity.039b27.js",o="lottery.9f0faf.js",a="lottery2.09d786.js",r="phone.8150e2.js",c="phone.8150e2.js",l="consult.de0159.js",i="normalForm.a7e243.js",s="creativeForm.14b170.js",d="lightForm.701cbf.js",u="commonCaptcha.a59455.js",m="commonCreativeCaptcha.7c6ff9.js",p="lightCommonCaptcha.256814.js",h="paySDK.ba7ea0.js",v="poll.a72de0.js",f="poll2.c3bd5c.js",y="clue.a61bbf.js",g=!1,w="http:"===location.protocol?"http:":"https:",C=w+(g?"//s16.ipstatp.com/clueapp/":"//s3.pstatp.com/bytecom/resource/clueapp/"),_={clue:C+y,vendor:C+n,activity:C+t,lottery:C+o,lottery2:C+a,phone:C+r,phoneEvent:C+c,consultEvent:C+l,normalForm:C+i,creativeForm:C+s,lightForm:C+d,commonCaptcha:C+u,commonCreativeCaptcha:C+m,paySDK:C+h,poll:C+v,poll2:C+f,lightCommonCaptcha:C+p},b={vendor:{name:"Vendor",url:C+n,deps:[]},activity:{name:"Activity",url:C+t,deps:["vendor"]},lotteryOld:{name:"LotteryOld",url:C+"lottery.c43196.js",deps:[],oldName:"ClueLotteryApp"},lottery:{name:"Lottery",url:C+o,deps:["vendor"],oldName:"ClueLotteryApp"},lottery2:{name:"Lottery2",url:C+a,deps:["vendor"]},phone:{name:"Phone",url:C+r,deps:["vendor"],oldName:"phoneapp"},consult:{name:"Consult",url:C+l,deps:["vendor"],oldName:"consultapp"},normalForm:{name:"NormalForm",url:C+i,deps:["vendor"],oldName:"ClueNormalFormApp"},creativeForm:{name:"CreativeForm",url:C+s,deps:["vendor"],oldName:"ClueCreativeFormApp"},lightForm:{name:"LightForm",url:C+d,deps:["vendor"],oldName:"ClueLightFormApp"},commonCaptcha:{name:"CommonCaptcha",url:C+u,deps:["vendor"],oldName:"commonCaptcha"},commonCreativeCaptcha:{name:"CommonCreativeCaptcha",url:C+m,deps:["vendor"],oldName:"commonCaptcha"},paySDK:{name:"PaySDK",url:C+h,deps:["vendor"],oldName:"paySDK"},poll:{name:"Poll",url:C+v,deps:["vendor"]},poll2:{name:"Poll2",url:C+f,deps:["vendor"]}},j={};Object.keys(b).forEach(function(e){j[e]={loaded:!1,appendPromise:null,loadedPromise:null}});var N,P,k,S,T=(N={},{now:P=function(){return"function"==typeof performance.now?performance.now():Date.now()},mark:function(e){N[e]=P()},measure:function(e,n){return{startTime:N[e],endTime:N[n],duration:N[n]-N[e]}}}),F=function(){},I=new Promise(function(n,t){var o=setTimeout(function(){n(),F("send","timing",{category:"clue_loader",action:"get_assets_skip",value:0})},1e3);try{T.mark("get_assets_start");var a=new XMLHttpRequest,r=w+(g?"//clue-global.bytedance.com":"//clue.oceanengine.com")+"/public/static/get-assets";a.open("GET",r,!0),a.send(),a.onreadystatechange=function(){if(4==a.readyState){if(200==a.status){var t=JSON.parse(a.responseText);t.version.timestamp>e.timestamp?(e.loaded=!0,e.revison=t.version.revison,e.time=t.version.time,Object.keys(b).forEach(function(e){t.assets[e]&&(b[e].url=C+t.assets[e])}),console.log("[CLUE]","update latest!",t)):console.log("[CLUE]","old assets!",t)}n(),window.clearTimeout(o),T.mark("get_assets_end");var r=T.measure("get_assets_start","get_assets_end");F("send","timing",{category:"clue_loader",action:"get_assets_start",value:r.startTime}),F("send","timing",{category:"clue_loader",action:"get_assets_end",value:r.startTime+r.duration}),F("send","timing",{category:"clue_loader",action:"get_assets_duration",value:r.duration})}}}catch(e){console.warn("加载错误",e),n()}}),E=null;function L(e){var n=b[e],t=j[e];if(n&&t){if(t.loaded||window.Clue[n.name])return t.loadedPromise||(t.loadedPromise=Promise.resolve());if(t.appendPromise)return t.appendPromise;var o;t.loadedPromise=new Promise(function(e){o=e});var a=I.then(function(){return Promise.all(n.deps.map(function(e){return L(e)}))}).then(function(){return new Promise(function(a,r){k||(k="load_".concat(e,"_start")),T.mark("load_".concat(e,"_start"));var c=document.createElement("script");c.onload=function(){n.loaded=!0,window.Clue[n.name]?n.oldName&&(window[n.oldName]=window.Clue[n.name]):n.oldName&&window[n.oldName]&&(window.Clue[n.name]=window[n.oldName]),o(),T.mark("load_".concat(e,"_end")),S="load_".concat(e,"_end");var t=T.measure("load_".concat(e,"_start"),"load_".concat(e,"_end"));F("send","timing",{category:"load_comp",action:"load_".concat(e,"_start"),value:t.startTime}),F("send","timing",{category:"load_comp",action:"load_".concat(e,"_end"),value:t.startTime+t.duration}),F("send","timing",{category:"load_comp",action:"load_".concat(e,"_duration"),value:t.duration}),-1!==E&&(E>0&&clearTimeout(E),E=setTimeout(function(){if(k&&S){E=-1;var e=T.measure(k,S);F("send","timing",{category:"load_comp",action:"load_all_start",value:e.startTime}),F("send","timing",{category:"load_comp",action:"load_all_end",value:e.startTime+e.duration}),F("send","timing",{category:"load_comp",action:"load_all_duration",value:e.duration})}},5e3))},c.onerror=function(e){t.loadPromise=null,r(e)},c.src=n.url,c.async=!1,document.body.appendChild(c),a()})},function(e){return t.appendPromise=null,Promise.reject(e)});return t.appendPromise=a,a}}function A(e){window.clueErrorLog||(window.clueErrorLog=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return console.error(n)}),L(e);var n=j[e];if(n)return n.loadedPromise}var D=function(){var e=F.n?F.n.i:F;e.shared&&e.shared.transport&&"function"==typeof e.shared.transport.postEvent&&(D=e.shared.transport.postEvent.bind(e.shared.transport)).apply(null,arguments)};var q,x,B,K,O,U,z,H,M=function(e,n){if(e)switch(e){case"normalForm":A("normalForm").then(function(){n()});break;default:console.warn("nothing to load, type=",e)}},G=function(e,n,t){if(e)switch(e){case"lottery":A("lotteryOld").then(function(){new ClueLotteryApp({compId:n.compId||0,clueAccountId:n.clueAccountId||0,advId:n.advId||0,container:n.container||document.querySelector("body"),extraData:n.extraData})});break;case"phoneEvent":A("phone").then(function(){window.Clue.Phone.createPhoneEvent({content:{type:n.type,normalPhoneNumber:n.normalPhoneNumber,smartPhoneContent:{instanceId:n.instanceId,phoneNumber:n.phoneNumber}},advToken:n.advToken,clueAccountId:n.clueAccountId||0},n.container)});break;case"consultEvent":A("consult").then(function(){window.Clue.Consult.createConsultEvent({consultType:n.consultType,link:n.link,consultId:n.consultId},n.container)});break;case"phone":A("phone").then(function(){window.Clue.Phone.createPhone({content:{type:n.type,normalPhoneNumber:n.normalPhoneNumber,smartPhoneContent:{instanceId:n.instanceId,phoneNumber:n.phoneNumber}},appearance:{buttonBgColor:n.buttonBgColor,fontColor:n.fontColor,btnText:n.btnText},advToken:n.advToken,clueAccountId:n.clueAccountId||0},n.container)});break;case"creativeForm":A("creativeForm").then(function(){});break;case"normalForm":A("normalForm").then(function(){window.Clue.NormalForm().createById({container:n.container,data:n.data,externalSetting:n.externalSetting})});break;case"commonCaptcha":A("commonCaptcha").then(function(){});break;case"commonCreativeCaptcha":A("commonCreativeCaptcha").then(function(){});break;case"paySDK":A("paySDK").then(function(){t()});break;case"getClueLoader":return M;case"getClueUrl":return _}};window.createClueComp||(window.createClueComp=G);try{H=function(e){var n,t=window.location.href.match(/(tetris\/page\/creative\/\d*?)|(tetris\/page\/\d*?)|(tetris\/store\/\d*?)|(clue\/lighting\/lp\/\d*?)/i);return t?t[1]?n="creative_form":t[2]?n="tetris_landing_page":t[3]?n="tetris_store":t[4]&&(n="light_landing_page"):n="other_page",n}(),window.Slardar&&window.Slardar.createInstance||(q=window,x=document,B="script",K=g?"https://mon-va.byteoversea.com/slardar/sdk.js?bid=clue_nidapp":"https://i.snssdk.com/slardar/sdk.js?bid=clue_nidapp",O="Slardar",q.SlardarMonitorObject=O,q[O]||(q[O]=function(){(q[O].q=q[O].q||[]).push(arguments)},q[O].createInstance=function(){var e={q:[],i:function(){(e.q=e.q||[]).push(arguments)}};(q[O].i=q[O].i||[]).push(e);var n=function(){e.i.apply(null,arguments)};return n.n=e,n}),q[O].l=1*new Date,U=x.createElement(B),z=x.getElementsByTagName(B)[0],U.async=1,U.src=K,z.parentNode.insertBefore(U,z)),(F=window.Slardar.createInstance())("config",{bid:"clue_nidapp",pid:H,ignoreAjax:[],ajaxWhitelistUrls:["clue.oceanengine.com","chengzijianzhan.com","clue-global.bytedance.com"],ignoreStatic:[],hookFetch:!0,enableSizeStats:!0}),window.Clue.Slardar=F,function(){var n,t,o,a,r,c,l;window.SentryLoad||(n=window,t=document,o="script",a=g?"https://sf16-muse-va.ibytedtos.com/obj/ttfe-maliva/sentry/5.6.1/bundle.min.js":"https://sf1-ttcdn-tos.pstatp.com/obj/ttfe/sentry/5.6.1/bundle.min.js",n[r="SentryLoad"]=function(e){(n[r].q=n[r].q||[]).push(e)},c=t.createElement(o),l=t.getElementsByTagName(o)[0],c.async=1,c.setAttribute("crossorigin","anonymous"),c.src=a,c.onload=function(e){e=n[r].q,n[r]=function(e){e.apply(null)},e&&e.forEach(function(e){e.apply(null)})},l.parentNode.insertBefore(c,l)),window.SentryLoad(function(){var n=window.Sentry;if(n){var t=n.defaultIntegrations.concat();t.splice(4,1),t.splice(2,1);var o=new n.BrowserClient({defaultIntegrations:t,dsn:"https://key@i.snssdk.com/log/sentry/v2/slardar",beforeSend:function(e){return D({ev_type:"jserr",sentry:e}),null},release:e.revison}),a=new n.Hub(o);window.Clue.Sentry=a}})}(),F("send","timing",{category:"clue_loader",action:"clue_loaded",value:T.now()})}catch(e){console.warn(e)}return{version:e,load:A,createClueComp:G}}();
